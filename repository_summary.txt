# Repository Summary - BewegendeAnimaties

## Project Overview
BewegendeAnimaties is een Python-gebaseerde tool voor het genereren van fMRI-stijl GIF animaties. Het project simuleert hersenactiviteit door bewegende elementen te animeren op een statische hersenachtergrond, met **enhanced neuroimaging kleurschalen** (hot, cool, jet, viridis) en dynamische kleureffecten.

## Repository Structure

### Root Directory
```
BewegendeAnimaties/
├── main.py                           # [PLANNED] Centraal uitvoerscript
├── demo_bewegend_mannetje.py         # Demo voor originele bewegende figuur
├── test_enhanced_colors.py           # Test suite voor enhanced fMRI kleuren ✅
├── requirements.txt                  # Python dependencies
├── project_info.txt                  # Project documentatie
├── project_stappen.txt              # Ontwikkelstappen en roadmap
├── repository_summary.txt           # Dit bestand
├── config/                          # Configuratie bestanden
├── animaties/                       # Animatie modules
├── utils/                           # Utility functies
└── output/                          # Gegenereerde GIF bestanden
```

## File Details by Directory

### Configuration (/config/)
**constants.py** (9.2KB) - **ENHANCED**
- Centrale configuratie voor alle animatie parameters
- **ORIGINEEL**: fMRI kleurenschema definities, ovaal dimensies, animatie timing
- **NIEUW**: 4 neuroimaging kleurschalen (hot, cool, jet, viridis)
- **NIEUW**: Kleur mapping configuratie voor intensiteitsniveaus
- **NIEUW**: Dynamische kleurverandering instellingen
- **NIEUW**: Enhanced gloed effect parameters
- Configuratie voor realistisch lopend mannetje
- Random walk parameters en bewegingsinstellingen
- Vlekken animatie configuratie (grootte, aantal, timing)

### Animation Modules (/animaties/)
**__init__.py** (klein bestand)
- Package initialisatie
- Importeert hoofdfuncties voor externe toegang

**bewegend_mannetje.py** (22.0KB) - **ENHANCED**
- **ORIGINELE FUNCTIONALITEIT**:
  - Ovaalroute algoritme voor smooth beweging
  - Abstracte cirkel figuur met fMRI styling
  - Verschillende route variaties (standaard, elliptisch, spiraal)
- **REALISTISCH MANNETJE**:
  - Stick figure mannetje met anatomische onderdelen
  - 6 verschillende poses voor natuurlijke loop-cyclus
  - Vrije beweging binnen ovaal met random walk algoritme
  - Natuurlijke richtingsveranderingen en bounce detection
  - Momentum-gebaseerde beweging voor realisme
- **ENHANCED KLEUREN**:
  - Bewegingsgebaseerde kleurvariatie (snelheid → kleur)
  - Activiteitsgebaseerde kleurmapping
  - Ondersteuning voor alle 4 kleurschalen
  - Enhanced gloed effecten met verhoogde intensiteit
  - Tijdelijke kleurvariatie en pulsing effecten

**vlekken_verschijnend.py** (13.4KB) - **ENHANCED**
- **ORIGINELE FUNCTIONALITEIT**:
  - Organische vlekken die geleidelijk uitspreiden tot volledig gevuld ovaal
  - Natuurlijk uitziende vlek vormen met irregulariteit
  - Sigmoid easing voor smooth groei patronen
  - Gespreide timing - vlekken verschijnen op verschillende momenten
- **ENHANCED KLEUREN**:
  - Grootte-gebaseerde kleurintensiteit mapping
  - Ondersteuning voor alle 4 kleurschalen
  - Enhanced gloed effecten met verhoogde intensiteit
  - Tijdelijke kleurvariatie gebaseerd op vlekgroei
  - Dynamische pulsing effecten per vlek

**vlekken_verdwijnend.py** (14.3KB) - **ENHANCED**
- **ORIGINELE FUNCTIONALITEIT**:
  - Reverse Algoritme: Omgekeerd proces van vlekken_verschijnend.py
  - Geleidelijke Verdwijning: Vlekken starten op maximale grootte en verdwijnen geleidelijk
  - Natuurlijke Patronen: Sigmoid easing voor smooth verdwijn curves
  - Gespreide Timing: Vlekken verdwijnen op verschillende momenten voor natuurlijk effect
- **ENHANCED KLEUREN**:
  - Verdwijn-gebaseerde kleurintensiteit (concentratie effect)
  - Ondersteuning voor alle 4 kleurschalen
  - Enhanced gloed effecten (minder intensief dan verschijnende vlekken)
  - Tijdelijke kleurvariatie aangepast voor verdwijning
  - Minder intensieve pulsing effecten voor natuurlijk verdwijnen

**tekst_verschijnend.py** (15.0KB) - **ENHANCED**
- **ORIGINELE FUNCTIONALITEIT**:
  - Letter-voor-letter animatie: Tekst verschijnt geleidelijk karakter voor karakter
  - Intelligente positionering: Automatische berekening van optimale tekstpositie binnen ovaal
  - Flexibele positionering: Ondersteuning voor center, left, right, top, bottom posities
  - Font management: Automatische font detectie met fallback opties
- **ENHANCED KLEUREN**:
  - Kleurschema-gebaseerde tekstkleuren (elk karakter eigen kleur)
  - Ondersteuning voor alle 4 kleurschalen
  - Enhanced gloed effecten voor betere zichtbaarheid
  - Gradient animatie effecten per karakter
  - Tijdelijke kleurvariatie voor dynamische effecten

### Utility Functions (/utils/)
**image_utils.py** (13.4KB) - **UITGEBREID**
- **ORIGINELE FUNCTIES**:
  - Achtergrond afbeelding laden en verwerken
  - Ovaal masker generatie en toepassing
  - Afbeelding compositing en blending
  - Punt-in-ovaal detectie algoritmes
- **NIEUWE FUNCTIES**:
  - `draw_stick_figure()`: Tekent anatomisch correct mannetje
  - `create_stick_figure()`: Genereert stick figure met poses
  - `generate_random_position_in_oval()`: Willekeurige startposities
  - `calculate_next_position()`: Beweging met bounce detection
  - `ensure_within_oval()`: Boundary correction algoritme
  - `is_position_in_oval()`: Uitgebreide positie validatie

**color_utils.py** (15.6KB) - **VOLLEDIG VERNIEUWD**
- **ORIGINELE FUNCTIES**: fMRI kleurenschema, gloed effecten, gradiënten, pulserende kleuren
- **ENHANCED FUNCTIES**:
  - 4 neuroimaging standaard kleurschalen (hot, cool, jet, viridis)
  - Vloeiende kleurovergangen met smooth interpolatie
  - Bewegingsgebaseerde kleurmapping (`create_movement_based_color`)
  - Activiteitsgebaseerde kleurveranderingen (`create_activity_based_color`)
  - Tijdelijke kleurvariatie en gradient animaties
  - Enhanced gloed effecten met verhoogde intensiteit
  - Kleurschema preview generatie (`create_color_preview`)
  - Intensiteit mapping voor positieve/negatieve activatie
  - Kleur blending en smooth interpolatie algoritmes

**gif_utils.py** (ongewijzigd)
- GIF creatie en optimalisatie
- Frame handling en timing
- Bestandsgrootte optimalisatie
- Test functionaliteit

### Test Scripts (Root)
**test_enhanced_colors.py** (9.1KB) - **NIEUW**
- **Volledige test suite voor enhanced fMRI kleuren**
- Test alle 4 kleurschalen voor alle animatie modules
- Kleurschema preview generatie
- Dynamische features testing
- Vergelijkingsoverzicht van kleurschalen
- Geautomatiseerde batch testing
- Resultaten samenvatting en validatie

### Demo Scripts (Root)
**demo_bewegend_mannetje.py** (bestaand)
- Demonstreert originele cirkel animatie
- Verschillende route variaties
- Gebruikersvriendelijke interface

### Documentation Files
**project_info.txt** (12.7KB) - **ENHANCED**
- Uitgebreide projectbeschrijving
- Doelgroep en use cases
- Architectuur overzicht
- Module status en afhankelijkheden
- **NIEUW**: Documentatie van enhanced fMRI kleuren functionaliteit
- **NIEUW**: Kleurschalen details (hot, cool, jet, viridis)
- **NIEUW**: Dynamische kleurverandering configuratie

**project_stappen.txt** (6.9KB) - **BIJGEWERKT**
- Ontwikkelroadmap en voortgang
- Must-have vs nice-to-have features
- **NIEUW**: Stap 6 voltooid (Enhanced fMRI Kleuren)
- Resterende ontwikkelstappen

**requirements.txt** (klein bestand)
- Python dependencies: Pillow, numpy
- Versie specificaties

## Key Architectural Components

### Enhanced Color System (NIEUW)
1. **4 Neuroimaging Kleurschalen**:
   - **Hot**: Zwart → Rood → Oranje → Geel → Wit (klassieke warme kleuren)
   - **Cool**: Cyaan → Blauw → Paars → Magenta (koele kleuren)
   - **Jet**: Blauw → Cyaan → Groen → Geel → Rood (rainbow kleuren)
   - **Viridis**: Paars → Blauw → Groen → Geel (perceptueel uniform)

2. **Dynamische Kleurveranderingen**:
   - Bewegingsgebaseerde kleuren (snelheid → intensiteit)
   - Activiteitsgebaseerde mapping (activiteitsniveau → kleur)
   - Tijdelijke kleurvariatie (cyclische veranderingen)
   - Gradient animatie effecten

3. **Enhanced Visual Effects**:
   - Verhoogde gloed radius en intensiteit
   - Smooth kleurovergangen tussen frames
   - Pulsing effecten met kleurschema integratie
   - Intensiteit mapping voor positieve/negatieve activatie

### Animation Engine
- Frame-by-frame rendering systeem
- Configurable timing en smoothness
- Multiple animation types support
- **ENHANCED**: fMRI-style visual effects pipeline met neuroimaging kleuren

### Movement Algorithms
1. **Ovaal Route** (origineel): Vaste elliptische bewegingsbaan
2. **Random Walk** (nieuw): Natuurlijke vrije beweging met:
   - Momentum-based direction changes
   - Boundary collision detection
   - Configurable randomness levels
   - Smooth trajectory generation
   - **ENHANCED**: Bewegingsgebaseerde kleurvariatie

### Spot Animation System
1. **Organic Spot Generation**: Natuurlijk uitziende vlek vormen
2. **Growth/Shrinkage Algorithms**: Sigmoid easing voor smooth transitie
3. **Timing Distribution**: Gespreide start/stop tijden voor natuurlijk effect
4. **ENHANCED Color System**: Neuroimaging kleurschalen met grootte-gebaseerde intensiteit
5. **Dynamic Effects**: Pulsing en tijdelijke kleurvariatie per vlek

### Text Animation System (ENHANCED)
1. **Letter-by-letter Rendering**: Karakter voor karakter onthulling
2. **Intelligent Positioning**: Automatische positionering binnen ovaal
3. **ENHANCED Colors**: Kleurschema-gebaseerde tekstkleuren per karakter
4. **Dynamic Effects**: Gradient animaties en tijdelijke kleurvariatie
5. **Enhanced Glow**: Verhoogde gloed effecten voor betere zichtbaarheid

### Rendering Pipeline (ENHANCED)
1. Background loading en processing
2. Figure/spot/text generation met enhanced kleuren
3. Position/size calculation met bewegingsgebaseerde kleurmapping
4. **ENHANCED**: Neuroimaging kleurschaal toepassing
5. **ENHANCED**: Dynamische gloed effecten met verhoogde intensiteit
6. Oval masking voor brain region
7. Frame compositing en output

## Recent Major Updates

### Issue #17 Implementation (Enhanced fMRI Kleuren) - **NIEUW**
1. **4 Neuroimaging Kleurschalen**: Hot, Cool, Jet, Viridis (wetenschappelijke standaarden)
2. **Vloeiende Kleurovergangen**: Smooth interpolatie tussen verschillende activiteitsniveaus
3. **Dynamische Kleurveranderingen**: Gebaseerd op bewegingssnelheid, tijd en activiteitsniveau
4. **Enhanced Gloed Effecten**: Verhoogde radius en intensiteit voor betere zichtbaarheid
5. **Wetenschappelijke Authenticiteit**: Verhoogt geloofwaardigheid door echte fMRI-kleurschalen
6. **Volledig Configureerbaar**: Alle kleurschalen en effecten instelbaar via constants
7. **Test Suite**: Uitgebreide test functionaliteit voor alle kleurschalen en animaties

### Eerdere Updates
- **Issue #5**: Realistisch Lopend Mannetje
- **Issue #10**: Vlekken Verschijnend
- **Issue #11**: Vlekken Verdwijnend
- **Issue #12**: Tekst Verschijnend

### Technische Verbeteringen (Enhanced Colors)
- Volledig vernieuwde `color_utils.py` met neuroimaging kleurschalen
- Uitgebreide configuratie opties in `constants.py`
- Alle animatie modules geüpdatet met enhanced kleuren
- Comprehensive test suite voor kleurschalen
- Bewegings- en activiteitsgebaseerde kleurmapping
- Enhanced gloed effecten met configureerbare intensiteit

## Development Status
- ✅ **Voltooid**: Basis infrastructuur, bewegende figuren, vlekken animaties, tekst animatie, **enhanced fMRI kleuren**
- 🔄 **In ontwikkeling**: Centraal script
- 📋 **Gepland**: Optimalisatie, uitgebreide configuratie, unit tests

## Animation Types Overview
1. **Bewegend Mannetje** (2 varianten):
   - Origineel: Abstracte cirkel op ovaalroute
   - Nieuw: Realistisch stick figure met vrije beweging
   - **ENHANCED**: Bewegingsgebaseerde kleurvariatie
2. **Vlekken Verschijnend**: Organische vlekken die uitspreiden
   - **ENHANCED**: Grootte-gebaseerde kleurintensiteit
3. **Vlekken Verdwijnend**: Organische vlekken die geleidelijk verdwijnen
   - **ENHANCED**: Verdwijn-gebaseerde kleurconcentratie
4. **Tekst Verschijnend**: Letter-voor-letter tekst animatie
   - **ENHANCED**: Kleurschema-gebaseerde tekstkleuren per karakter

## Enhanced Color Features
1. **Wetenschappelijke Authenticiteit**: Echte neuroimaging kleurschalen
2. **Dynamische Effecten**: Bewegings-, tijd- en activiteitsgebaseerde kleuren
3. **Vloeiende Overgangen**: Smooth interpolatie tussen kleurstappen
4. **Enhanced Gloed**: Verhoogde radius en intensiteit
5. **Configureerbaar**: Volledig instelbaar via constants
6. **Test Suite**: Uitgebreide validatie en vergelijking

## Usage Patterns
1. **Onderzoek**: Wetenschappelijke visualisaties met authentieke fMRI-kleuren
2. **Educatie**: Uitleg van neurale processen met realistische kleurschalen
3. **Presentaties**: Professionele animaties met neuroimaging standaarden
4. **Demonstraties**: Interactieve voorbeelden met verschillende kleurschalen
5. **Inhibitie Studies**: Visualisatie van afnemende hersenactiviteit
6. **Herstelprocessen**: Tonen van neurologische herstel patronen

Het project biedt nu een **wetenschappelijk authentiek** platform voor het creëren van fMRI-stijl hersenactiviteit animaties, met ondersteuning voor neuroimaging standaard kleurschalen en dynamische kleureffecten die de visuele impact en wetenschappelijke geloofwaardigheid aanzienlijk verhogen.